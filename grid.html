<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Test</title>
<style type="text/css">
#inputs td {
	text-align: center;
}
</style>
<script language="javascript">

var MIN_DIVISOR = 1;
var MAX_DIVISOR = 9;

var MIN_QUOTIENT = 0;
var MAX_QUOTIENT = 9;

function getRandomInt(min, max) {
	return Math.floor(Math.random() * (max - min + 1)) + min;
}

function generateProblems(form)
{
	var problems = [];

	for (divisor=MIN_DIVISOR; divisor<=MAX_DIVISOR; divisor++) {
		for (quotient=MIN_QUOTIENT; quotient<=MAX_QUOTIENT; quotient++) {
			var id = 'cb' + divisor + '_' + quotient;
			cb = document.getElementById(id);

			if (cb.checked) {
				problems.push({
					divisor: divisor,
					quotient: quotient
				});
			}
		}
	}

	if (problems.length == 0) return;

	var minDiv = MIN_DIVISOR;
	var maxDiv = MAX_DIVISOR;
	var minQuot = MIN_QUOTIENT;
	var maxQuot = MAX_QUOTIENT;

	var old_tbody = document.getElementById('problems');
	var new_tbody = document.createElement('tbody');
	new_tbody.setAttribute('id', 'problems');

	for (i=0; i<form.num_problems.value; i++) {
		var index = getRandomInt(0, problems.length-1);
		var divisor = problems[index].divisor;
		var quotient = problems[index].quotient;
		var dividend = divisor * quotient;

		var tr = document.createElement('TR');

		var td = document.createElement('TD');
		td.appendChild(document.createTextNode(i + 1 + ")"));
		tr.appendChild(td);

		var td = document.createElement('TD');
		td.appendChild(document.createTextNode(dividend));
		tr.appendChild(td);

		var td = document.createElement('TD');
		td.appendChild(document.createTextNode('/'));
		tr.appendChild(td);

		var td = document.createElement('TD');
		td.appendChild(document.createTextNode(divisor));
		tr.appendChild(td);

		var td = document.createElement('TD');
		td.appendChild(document.createTextNode('='));
		tr.appendChild(td);

		var td = document.createElement('TD');
/*
		td.appendChild(document.createTextNode(quotient));
*/
		td.appendChild(document.createTextNode('_____'));
		tr.appendChild(td);

		new_tbody.appendChild(tr);
	}

	old_tbody.parentNode.replaceChild(new_tbody, old_tbody);
}

function populateInputs()
{
	var old_tbody = document.getElementById('inputs');
	var new_tbody = document.createElement('tbody');
	new_tbody.setAttribute('id', 'inputs');

	var tr = document.createElement('TR');
	var td = document.createElement('TD');
	tr.appendChild(td);
	for (divisor=MIN_DIVISOR; divisor<=MAX_DIVISOR; divisor++) {
		var td = document.createElement('TD');
		td.appendChild(document.createTextNode(divisor));
		tr.appendChild(td);
	}
	new_tbody.appendChild(tr);

	for (quotient=MIN_QUOTIENT; quotient<=MAX_QUOTIENT; quotient++) {
		var tr = document.createElement('TR');

		var td = document.createElement('TD');
		td.appendChild(document.createTextNode(quotient));
		tr.appendChild(td);

		for (divisor=MIN_DIVISOR; divisor<=MAX_DIVISOR; divisor++) {
			var td = document.createElement('TD');

			var cb = document.createElement('input');
			cb.setAttribute('type', 'checkbox');
			var id = 'cb' + divisor + '_' + quotient;
			cb.setAttribute('id', id);
			td.appendChild(cb);

			tr.appendChild(td);
		}

		new_tbody.appendChild(tr);
	}

	old_tbody.parentNode.replaceChild(new_tbody, old_tbody);
}

window.onload = populateInputs;
</script>
</head>
<body>
<form>
	<table>
		<tbody id="inputs">
		</tbody>
	</table>
	<input type="number" name="num_problems" min="1" value="10">
	<input type="button" name="generate" value="Generate Problems"
		onClick="javascript:generateProblems(this.form)">
</form>

<table>
	<tbody id="problems">
	</tbody>
</table>

</body>
</html>
